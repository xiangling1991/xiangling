#一:产生式系统
![Build status](https://api.travis-ci.org/fchollet/keras.svg)

##使用产生式系统作为人工智能系统的主要结构的理由：
 - 用产生式系统结构求解问题的过程和人类求解问题时的思维过程很相像，因而可以用它来模拟人类求解问题时的思维过程。
 - 可以把产生式系统作为人工智能系统的基本结构单元或基本模式看待，就好像是积木世界的积木块一样，因而研究产生式系统的基本问题就具有一般意义。

##产生式系统组成：
 - 综合数据库(Global Database)-->是人工智能产生式系统所使用的主要数据结构，用来表述问题状态或有关事实，包含所求问题的信息，
 其中有些部分可以是不变的，有些不法则可能只与当前问题的解有关。
 - 产生式规则(Set of Rules)-->一般形式如下：
    - 条件--->行动  或 前提--->结论=======> if...then...
 - 控制系统(Control System)-->是规则的解释程序。规定了如何选择一条可应用的规则对数据库进行操作，即决定了问题求解过程的推理路线。
 
上述产生式定义具有一般性，作为人工智能中的一种形式体系，具有以下优点：
 - 适合于模拟强数据驱动特点的智能行为。当一些新的数据输入时，系统的行为就要改变。
 - 易于添加新规则去适应新的情况，而不会破坏系统的其它部分。这是由于产生式系统的各组成部分
 具有相对的独立性，因而便于扩展和修改。
 
 
##八数码问题
建立问题的产生式描述
1. 规定综合数据库
 - 这里使用二维数组表示将牌的布局(可选结构:符号串、向量、集合、数组、树、表格、文件...)
  - S(i,j)，其中i >= 1,j <= 3,S(i,j)[-{0, 1, ..., 8},S(i,j)互不相等，这样每一个具体的矩阵就可以表示一个棋局的状态。
2. 规则集合
  - 移动一块将牌就使状态发生转变，四种状态(上、下、左、右移动)，可用来产生4条规则来模拟。
  - 用S(i,j)记矩阵第i行第j列的数码，i0, j0记空格所在的行、列数值，即S(i0, j0)=0，则
  - if j0 - 1 >= 1 then S(i0, j0) := S(i0, j0 - 1), S(i0, j0 - 1) := 0 左移
  - if i0 - 1 >= 1 then S(i0, j0) := S(i0 - 1, j0), S(i0 - 1, j0) := 0 上移
  - if j0 + 1 <= 3 then S(i0, j0) := S(i0, j0 + 1), S(i0, j0 + 1) := 0 右移
  - if i0 + 1 <= 3 then S(i0, j0) := S(i0 + 1, j0), S(i0 + 1, j0) := 0 下移
3. 搜索策略
 - 从规则集中选取规则并作用于状态的一种广义选取函数，确定某一种策略后，可以算法的形式给出。
 在建立产生式系统描述时，还要给出初始状态和目标条件，具体说明求解的问题。产生式系统中的控制
 策略的作用就是从初始状态出发，寻求一个满足一定条件的问题状态。
  - 例如：初始状态[2, 8, 3;1, 6, 4;7, 0, 5] --->目标状态[1, 2, 3;8, 0, 4;7, 6, 5];


在一般情况下，问题可能有多个解的序列，但有时会要求得到某些附加约束条件的解，例如要求步数最少、距离最短等。
约束条件通常是用耗散或代价这一概念来概括

##产生式系统的基本过程
 - 用产生式系统求解八数码游戏和M-C这一类问题时，基本算法如下
    - 过程PRODUCTION
     - DATA<---初始数据库
     - until DATA满足结束条件以前,do:
        - begin
        - 在规则集中，选取一条可应用于DATA的规则R
        -  DATA<--R应用到DATA得到的结果
     -    end

##产生式系统控制策略
1. 分类：
 - 不可撤回方式(Irrevocable)
 - 试探性方式  (Tentative)   
    - 回溯方式 (Backtracking)
    - 图搜索方式(Graph-search)

2. 不可撤回方式：这种方式是利用问题给出的局部知识来决定如何选取规则的，就是说根据当前可靠的局部知识选一条可应用规则并作用于
当前综合数据库。接着再根据新状态继续选取规则，搜索过程一直进行下去，不必考虑撤回用过的规则。这样的规则并不影响到解，知识解
序列中可能多了一些不必要的规则。
    - 优点：
        - 控制简单
    - 缺点：
        - 出现多极值的问题时可能会无法得到解
3. 回溯方式：在问题求解过程中，有时会发现应用一条不合适的规则会阻挠或拖延达到目标过程。在这种情况下，需要有这样的控制策略：
先试一试某一条规则，如果以后发现这条规则不合适，则允许退回去，另选一条规则来试。

4. 图搜索方式：如果把问题求解过程用图或树的这种结构来描述， 即图中的每一个节点代表问题的状态，节点间的弧代表方式就是用某种
策略选择应用规则，并把状态变化过程用图结构记录下来，一直到得出解为止，也就是从隐含图中搜索出含有解路径的子图来。

5. 三种控制方式的区别：
    - 不可撤回方式相当于沿着单独的一条路向下延伸搜索下去
    - 回溯方法则不保留完整的搜索树结构，只记住当前工作的一条路径，回溯就是对这条路径进行修正。
    - 图搜索方式则记下完整的搜索树。

##产生式系统的类型

1. 正向、逆向、双向产生式系统
 - 正向产生式系统：
    - 从初始状态出发朝着目标状态这个方向来使用规则，称为F规则
 - 逆向产生式系统：
    - 选取目标描述作为初始综合数据库逆向进行求解，产生子目标状态，称为B规则
 - 双向产生式系统：
    - 正向和逆向同时进行，这时必须把状态描述和目标描述合并构成综合数据库，这种类型的搜索，其控制策略所使用的结束条件要
表示成综合数据库中状态描述部分与目标描述部分之间某种形式的匹配条件，而且搜索时还要决定每一段上要选用F规则还是B规则。

2. 当一个产生式系统对任何一个数据库D都具有如下性质时，这个产生式系统时可交换的：
    - 可应用于D的规划集合，对用了其中任意一条规则之后所生成的任何数据库，这个规则集合还适用；
    - 满足目标条件的某个数据库D，但应用任何一个可应用于数据库D的规则之后所生成的任何数据库，仍然满足目标条件；
    - 若对D应用某一规则序列之后得到一个数据库D'(设有一对应于D->D'的一条解路)，则当改变D的可应用规则集合中的规则次序后
        仍然可求的解，即求得D'与使用满足D的可应用规则集合中的规则次序无关。

3. 可分解的产生式系统

    eg:
    - 初始数据库为(C, B, Z),产生式规则的依据如下的重写规则：
        - R1: C->(D, L)
        - R2: C->(B, M)
        - R3: B->(M, M)
        - R4: Z->(B, B, M)
        
    - 结束条件是生成只包含M组成的数据库,即(M, ..., M)
    
    
能够分解产生式系统的综合数据库和结束条件的产生式系统称为可分解的产生式系统。一个可分解的产生式系统，其基本过程描述如下。
   - DATA := 初始数据库
   - {Di} := DATA的分解式；每个Di元素都看成单独的数据库
   - Until {Di}的所有元素都满足结束条件前，do:
        - begin
            - 从{Di}中选一个不满足结束条件的D*
            - 从{Di}中删去D*
            - 在规则集中选择一条可应用于D*的规则R
            - D := R应用于D*的结果
            - {di} := D的分解式
            - 在{Di}上添加di
        - end         



{a, b, c} =>{c, c, c}

[a, 0, 0]       [0, 0, a]
[b, 0, 0]  =>   [0, 0, b]
[c, 0, 0]       [0, 0, c]

``clojure
